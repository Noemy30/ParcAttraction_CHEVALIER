<mat-card>
  <mat-card-header>
    <mat-card-title>Ajouter un avis pour {{ data.attractionName }}</mat-card-title>
  </mat-card-header>
  <mat-card-content>
    <form [formGroup]="avisForm" (ngSubmit)="submitAvis()">
      <mat-checkbox formControlName="anonyme" (change)="toggleAnonyme()">Soumettre en anonyme</mat-checkbox>

      <mat-form-field class="full-width" *ngIf="!avisForm.get('anonyme')?.value">
        <mat-label>Nom</mat-label>
        <input matInput formControlName="nom" placeholder="Votre nom">
      </mat-form-field>
      
      <mat-form-field class="full-width" *ngIf="!avisForm.get('anonyme')?.value">
        <mat-label>Prénom</mat-label>
        <input matInput formControlName="prenom" placeholder="Votre prénom">
      </mat-form-field>
      
      <!-- Étoiles pour la note -->
      <div class="stars-container">
        <label>Note :</label>
        <div class="stars">
          <mat-icon
            *ngFor="let star of stars; let i = index"
            (click)="setRating(i + 1)"
            [class.selected]="i < avisForm.get('note')?.value"
          >
            star
          </mat-icon>
        </div>
      </div>

      <!-- Champ Texte -->
      <mat-form-field class="full-width">
        <mat-label>Texte</mat-label>
        <textarea matInput formControlName="texte" placeholder="Votre avis"></textarea>
      </mat-form-field>
    </form>
  </mat-card-content>
  <mat-card-actions align="end">
    <button mat-button mat-dialog-close>Annuler</button>
    <button mat-raised-button color="primary" (click)="submitAvis()">Envoyer</button>
  </mat-card-actions>
</mat-card>
